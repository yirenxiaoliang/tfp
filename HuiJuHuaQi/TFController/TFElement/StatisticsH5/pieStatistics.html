<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<script src="https://cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script>
		<script src="http://echarts.baidu.com/dist/echarts.min.js"></script>
	</head>
	<body>
		<div id="container" style="max-width:100%;height:300px"></div>
		<script>
			// 封装成函数：
			// 1.ajax请求成功后调用函数
			// 2.原生OC传值调用函数
			// 基于准备好的dom，初始化echarts图表
			var chart = echarts.init(document.getElementById('container'));
			
			var statisticsFunction = function(option) {
				// 为echarts对象加载数据 
				chart.setOption(option, true);
			};
			
			var option = {};
			var value = {
				title:'站点数据来源',
				series: [
					{ value: 335, name: '直接访问' },
					{ value: 310, name: '邮件营销' },
					{ value: 234, name: '联盟广告' },
					{ value: 135, name: '视频广告' },
					{ value: 1548, name:'搜索引擎'}
				]
			};
			
			var pieFunction = function(value) {
                
				var arr = [];
				for (var i = 0; i < value.series.length; i++) {
					arr.push(value.series[i].name);	
				}
				
				option = {
				    title : {
				        text: value.title,
				        left:'center'
				    },
				    tooltip : {
				        trigger: 'item',
				        formatter: "{a} <br/>{b} : {c} ({d}%)"
				    },
				    legend: {
				        orient: 'horizontal',
				        left: 'center',
				        top:'bottom',
				        data: arr
				    },
				    series : [
				        {
				            name: '访问来源',
				            type: 'pie',
				            radius : '55%',
				            center: ['50%', '50%'],
				            data:value.series,
				            itemStyle: {
				                emphasis: {
				                    shadowBlur: 10,
				                    shadowOffsetX: 0,
				                    shadowColor: 'rgba(0, 0, 0, 0.5)'
				                }
				            }
				        }
				    ]
				};
				// 执行报表
				statisticsFunction(option);
			}
			// 饼状图
			//pieFunction(value);
            
            var barValue = {
                title:'站点数据来源',
                yAxis:['巴西','印尼','美国','印度','中国','世界人口(万)'],
                series: [
                         { data: [18203, 23489, 29034, 104970, 131744, 630230], name: '2011年' },
                         { data: [19325, 23438, 31000, 121594, 134141, 681807], name: '2012年'}
                         ]
            };
        
            var horBarFunction = function(value){
                
                var arr = [];
                var series = [];
                for (var i = 0; i < value.series.length; i++) {
                    arr.push(value.series[i].name);
                    var obj = {};
                    obj.name = value.series[i].name;
                    obj.data = value.series[i].data;
                    obj.type = 'bar';
                    series.push(obj);
                }
                
                option = {
                    title: {
                        text: value.title,
                        left:'center'
                    },
                    tooltip: {
                        trigger: 'axis',
                        axisPointer: {
                            type: 'shadow'
                        }
                    },
                    legend: {
                        orient: 'horizontal',
                        left: 'center',
                        bottom:'bottom',
                        data: arr
                    },
                    grid: {
                        left: '0%',
                        right: '5%',
                        top: '40px',
                        containLabel: true
                    },
                    xAxis: {
                        type: 'value',
                        boundaryGap: [0, 0.01]
                    },
                    yAxis: {
                        type: 'category',
                        data: value.yAxis
                    },
                    series: series
                };
                
                // 执行报表
                statisticsFunction(option);
            }
            
            // 条形图
            // horBarFunction(barValue);
            
            
            var vbarValue = {
                title:'站点数据来源',
                xAxis:['巴西','印尼','美国','印度','中国','世界人口(万)'],
                series: [
                         { data: [18203, 23489, 29034, 104970, 131744, 630230], name: '2011年' },
                         { data: [19325, 23438, 31000, 121594, 134141, 681807], name: '2012年'}
                         ]
            };
        
            var verBarFunction = function(value){
                var arr = [];
                var series = [];
                for (var i = 0; i < value.series.length; i++) {
                    arr.push(value.series[i].name);
                    var obj = {};
                    obj.name = value.series[i].name;
                    obj.data = value.series[i].data;
                    obj.type = 'bar';
                    series.push(obj);
                }
                option = {
                    
                    title: {
                        text: value.title,
                        left:'center'
                    },
                    tooltip: {
                        trigger: 'axis',
                        axisPointer: {
                            type: 'shadow'
                        }
                    },
                    legend: {
                        orient: 'horizontal',
                        left: 'center',
                        top:'bottom',
                        data: arr
                    },
                    grid: {
                        left: '0%',
                        right: '6%',
                        top: '40px',
                        containLabel: true
                    },
                    xAxis : [
                             {
                                type : 'category',
                                data : value.xAxis,
                                axisTick: {
                                    alignWithLabel: true
                                }
                             }
                             ],
                             yAxis : [
                                      {
                                        type : 'value',
                                        boundaryGap: [0, 0.01]
                                      }
                                      ],
                                      series : series
                };
                // 执行报表
                statisticsFunction(option);
            }
            // 柱状图
            //verBarFunction(vbarValue);
			
            
            
            
            var lineValue = {
                title:'站点数据来源',
                xAxis:['巴西','印尼','美国','印度','中国','世界人口(万)'],
                series: [
                         { data: [18203, 23489, 29034, 104970, 131744, 630230], name: '2011年' },
                         { data: [19325, 23438, 31000, 121594, 134141, 681807], name: '2012年'}
                         ]
            };
        
            var lineFunction = function(value){
                
                var arr = [];
                var series = [];
                for (var i = 0; i < value.series.length; i++) {
                    arr.push(value.series[i].name);
                    var obj = {};
                    obj.name = value.series[i].name;
                    obj.data = value.series[i].data;
                    obj.type = 'line';
                    obj.smooth = value.series[i].smooth;
                    series.push(obj);
                }
                option = {
                    title: {
                        text: value.title,
                        left:'center'
                    },
                    tooltip: {
                        trigger: 'axis',
                        axisPointer: {
                            type: 'shadow'
                        }
                    },
                    legend: {
                        orient: 'horizontal',
                        left: 'center',
                        top:'bottom',
                        data: arr
                    },
                    grid: {
                        left: '0%',
                        right: '6%',
                        top: '40px',
                        containLabel: true
                    },
                    xAxis: {
                        type: 'category',
                        boundaryGap: false,
                        data: value.xAxis
                    },
                    yAxis: {
                        type: 'value',
                        boundaryGap: [0, 0.01]
                    },
                    series: series
                };
                
                // 执行报表
                statisticsFunction(option);
            }
            
            // 线形图
            //lineFunction(lineValue);
            
            var funnelValue = {
                title:'销售漏斗',
                series: [
                         { value: 60, name: '邮件营销' },
                         { value: 40, name: '联盟广告'},
                         { value: 20, name: '视频广告'},
                         { value: 80, name: '直接访问'},
                         { value: 100, name: '搜索引擎'},
                         ]
            };
        
            var funnelFunction = function(value){
                
                var legend = [];
                var series = [];
                for (var i = 0; i < value.series.length; i++) {
                    legend.push(value.series[i].name);
                    var obj = {};
                    obj.name = value.series[i].name;
                    obj.value = value.series[i].value;
                    series.push(obj);
                }
                option = {
                    title: {
                        text: value.title,
                        left:'center'
                    },
                    tooltip: {
                        trigger: 'item',
                        formatter: "{a} <br/>{b} : {c}%"
                    },
                    legend: {
                        orient: 'horizontal',
                        left: 'center',
                        top:'bottom',
                        data: legend
                    },
                    calculable: true,
                    series: [
                             {
                                name:'漏斗图',
                                type:'funnel',
                                left: '10%',
                                top: 60,
                                bottom: 60,
                                width: '80%',
                                min: 0,
                                max: 100,
                                minSize: '0%',
                                maxSize: '100%',
                                sort: 'descending',
                                gap: 2,
                                label: {
                                    normal: {
                                                show: true,
                                                position: 'inside'
                                    },
                                    emphasis: {
                                                textStyle: {
                                                            fontSize: 20
                                                            }
                                                }
                                },
                                labelLine: {
                                        normal: {
                                                length: 10,
                                                lineStyle: {
                                                        width: 1,
                                                        type: 'solid'
                                                }
                                        }
                                },
                                itemStyle: {
                                            normal: {
                                                    borderColor: '#fff',
                                                    borderWidth: 1
                                            }
                                },
                                data: series
                             }
                             ]
                };
                
                // 执行报表
                statisticsFunction(option);
            }
            
            // 线形图
            //funnelFunction(funnelValue);
            
            
            var gaugeValue = {
                title:'业务指标完成率',
                series: [
                         { value: 60, name: '邮件营销' }
                         ]
            };
        
            var gaugeFunction = function (value){
                
                option = {
                    title: {
                        text: value.title,
                        left:'center'
                    },
                    tooltip : {
                        formatter: "{a} <br/>{b} : {c}%"
                    },
                    series: [
                             {
                             name: value.series[0].name,
                             type: 'gauge',
                             detail: {formatter:'{value}%'},
                             data: value.series
                             }
                             ]
                             
                };
                // 执行报表
                statisticsFunction(option);
            }
            // 仪表图
            // gaugeFunction(gaugeValue);
            
		</script>
		
	</body>
</html>
